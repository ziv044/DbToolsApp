# Story 4.14: Alert Rules Configuration UI

## Status: Draft

## Story

**As a** user,
**I want** an interface to create and manage alert rules,
**so that** I can customize alerting to my needs.

## Acceptance Criteria

| # | Criteria |
|---|----------|
| 1 | Alert Rules page at `/alerts/rules` route |
| 2 | Rules list: Name, Metric, Condition, Severity, Status, Actions |
| 3 | "Create Rule" opens form: Name, Metric (dropdown), Operator, Threshold, Severity |
| 4 | Pre-built rule templates: High CPU, High Memory, Connection Spike |
| 5 | Enable/disable toggle per rule |
| 6 | Edit and delete actions |
| 7 | "Preview" shows which servers would currently trigger |
| 8 | Validation: threshold must be positive number |
| 9 | Default rules created for new tenants (CPU >90%, Memory >90%) |

## Tasks / Subtasks

- [ ] Task 1: Create Alert Rules page (AC: 1)
- [ ] Task 2: Create rules list (AC: 2, 5, 6)
- [ ] Task 3: Create rule form (AC: 3, 8)
- [ ] Task 4: Add templates (AC: 4)
- [ ] Task 5: Add preview feature (AC: 7)
- [ ] Task 6: Seed default rules (AC: 9)

## Dev Notes

### Rule Templates
```typescript
const RULE_TEMPLATES = [
  { name: 'High CPU', metric: 'cpu_percent', operator: 'gt', threshold: 90, severity: 'critical' },
  { name: 'High Memory', metric: 'memory_percent', operator: 'gt', threshold: 90, severity: 'critical' },
  { name: 'Connection Spike', metric: 'connection_count', operator: 'gt', threshold: 200, severity: 'warning' },
];
```

### Rule Form
```typescript
const RuleForm = () => {
  return (
    <form>
      <Input name="name" label="Rule Name" />
      <Select name="metric" label="Metric">
        <Option value="cpu_percent">CPU %</Option>
        <Option value="memory_percent">Memory %</Option>
        <Option value="connection_count">Connections</Option>
      </Select>
      <Select name="operator" label="Condition">
        <Option value="gt">Greater than</Option>
        <Option value="gte">Greater or equal</Option>
        <Option value="lt">Less than</Option>
      </Select>
      <Input name="threshold" type="number" label="Threshold" />
      <Select name="severity" label="Severity">
        <Option value="info">Info</Option>
        <Option value="warning">Warning</Option>
        <Option value="critical">Critical</Option>
      </Select>
    </form>
  );
};
```

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-17 | 0.1 | Initial story creation | PM (John) |

---

## Dev Agent Record

### Agent Model Used
### Debug Log References
### Completion Notes List
### File List

---

## QA Results
