# Story 2.5: Server Detail View

## Status: Draft

## Story

**As a** user,
**I want** to see detailed information about a single server,
**so that** I can review its configuration and status.

## Acceptance Criteria

| # | Criteria |
|---|----------|
| 1 | Server detail page at `/servers/{id}` route |
| 2 | Header: Server name, status badge, edit/delete actions |
| 3 | Connection info card: Host, Port, Instance, Auth Type, Version, Edition |
| 4 | Groups card: List of assigned groups with remove option |
| 5 | Labels card: List of labels with add/remove capability |
| 6 | Activity section: Recent activity log entries for this server |
| 7 | "Test Connection" button to re-validate connectivity |
| 8 | "Edit" button opens edit modal (same as onboarding form) |
| 9 | "Delete" button with confirmation dialog |
| 10 | Breadcrumb navigation back to server list |

## Tasks / Subtasks

- [ ] Task 1: Create server detail page (AC: 1, 10)
  - [ ] Create `src/pages/ServerDetail.tsx`
  - [ ] Add dynamic route `/servers/:id`
  - [ ] Fetch server by ID
  - [ ] Add breadcrumb navigation

- [ ] Task 2: Create page header (AC: 2, 7, 8, 9)
  - [ ] Display server name and status
  - [ ] Add "Test Connection" button
  - [ ] Add "Edit" button (opens modal)
  - [ ] Add "Delete" button with confirmation

- [ ] Task 3: Create connection info card (AC: 3)
  - [ ] Create `src/components/servers/ServerInfoCard.tsx`
  - [ ] Display all connection details
  - [ ] Show version if available

- [ ] Task 4: Create groups card (AC: 4)
  - [ ] Create `src/components/servers/ServerGroupsCard.tsx`
  - [ ] List assigned groups as chips
  - [ ] Add remove button per group
  - [ ] (Group assignment in later story)

- [ ] Task 5: Create labels card (AC: 5)
  - [ ] Create `src/components/servers/ServerLabelsCard.tsx`
  - [ ] List labels as colored chips
  - [ ] Add remove button per label
  - [ ] (Label management in later story)

- [ ] Task 6: Create activity section (AC: 6)
  - [ ] Create `src/components/servers/ServerActivity.tsx`
  - [ ] Fetch recent activity for server
  - [ ] Display in timeline format

## Dev Notes

### Server Detail Hook
```typescript
export function useServer(id: string) {
  return useQuery({
    queryKey: ['servers', id],
    queryFn: () => serverService.getById(id),
    enabled: !!id,
  });
}
```

### Page Layout
```
┌─────────────────────────────────────────────┐
│ Servers > Server Name                       │
│ ┌─────────────────────────────────────────┐ │
│ │ Server Name          [Online]           │ │
│ │ [Test] [Edit] [Delete]                  │ │
│ └─────────────────────────────────────────┘ │
│                                             │
│ ┌─────────────────┐ ┌─────────────────┐    │
│ │ Connection Info │ │ Groups          │    │
│ │ Host: sql-01    │ │ Production      │    │
│ │ Port: 1433      │ │ Finance         │    │
│ │ Auth: SQL       │ └─────────────────┘    │
│ │ Version: 2019   │ ┌─────────────────┐    │
│ └─────────────────┘ │ Labels          │    │
│                     │ critical, tier1 │    │
│ ┌─────────────────────────────────────────┐ │
│ │ Recent Activity                         │ │
│ │ • Server added - 2 days ago             │ │
│ │ • Connection tested - 1 day ago         │ │
│ └─────────────────────────────────────────┘ │
└─────────────────────────────────────────────┘
```

### Delete Confirmation
```typescript
const handleDelete = async () => {
  const confirmed = await confirm({
    title: 'Delete Server',
    description: `Are you sure you want to delete "${server.name}"?`,
  });
  if (confirmed) {
    await deleteServer.mutateAsync(server.id);
    navigate('/servers');
  }
};
```

## Testing

### Test Requirements
- Test page loads with server data
- Test test connection button
- Test edit modal opens
- Test delete with confirmation
- Location: `frontend/tests/pages/ServerDetail.test.tsx`

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-17 | 0.1 | Initial story creation | PM (John) |

---

## Dev Agent Record

### Agent Model Used
(To be filled by dev agent)

### Debug Log References
(To be filled by dev agent)

### Completion Notes List
(To be filled by dev agent)

### File List
(To be filled by dev agent)

---

## QA Results
(To be filled by QA agent)
