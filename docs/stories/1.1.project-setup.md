# Story 1.1: Project Setup & Repository Structure

## Status: Draft

## Story

**As a** developer,
**I want** a properly structured monorepo with Flask backend and React frontend,
**so that** I have a solid foundation to build features upon.

## Acceptance Criteria

| # | Criteria |
|---|----------|
| 1 | Repository follows monorepo structure: `/backend`, `/frontend`, `/docs`, `/scripts` |
| 2 | Backend: Flask 3.x project with virtual environment and requirements.txt |
| 3 | Backend: Flask configuration supports dev/prod environments via environment variables |
| 4 | Frontend: React 18 + TypeScript + Vite project initialized |
| 5 | Frontend: ESLint + Prettier configured for consistent code style |
| 6 | `/api/health` endpoint returns `{"status": "healthy"}` with 200 OK |
| 7 | Setup script (`scripts/setup.ps1`) to initialize local environment |
| 8 | README.md with manual setup instructions |
| 9 | `.env.example` file documenting required environment variables |

## Tasks / Subtasks

- [ ] Task 1: Create directory structure (AC: 1)
  - [ ] Create `/backend` folder
  - [ ] Create `/frontend` folder
  - [ ] Create `/scripts` folder
  - [ ] Verify `/docs` exists

- [ ] Task 2: Initialize Flask backend (AC: 2, 3)
  - [ ] Create `backend/requirements.txt` with Flask 3.x and dependencies
  - [ ] Create `backend/requirements-dev.txt` with dev dependencies
  - [ ] Create `backend/app/__init__.py` with app factory pattern
  - [ ] Create `backend/app/config.py` with Config class (dev/prod)
  - [ ] Create `backend/run.py` entry point

- [ ] Task 3: Create health endpoint (AC: 6)
  - [ ] Add `/api/health` route returning `{"status": "healthy"}`
  - [ ] Test endpoint returns 200 OK

- [ ] Task 4: Initialize React frontend (AC: 4, 5)
  - [ ] Initialize Vite + React + TypeScript project in `/frontend`
  - [ ] Configure ESLint with recommended rules
  - [ ] Configure Prettier for code formatting
  - [ ] Add npm scripts for dev, build, lint, format

- [ ] Task 5: Create setup script (AC: 7)
  - [ ] Create `scripts/setup.ps1` for Windows
  - [ ] Script creates Python virtual environment
  - [ ] Script installs Python dependencies
  - [ ] Script installs npm dependencies

- [ ] Task 6: Create documentation (AC: 8, 9)
  - [ ] Create `README.md` with setup instructions
  - [ ] Create `.env.example` with all required variables

## Dev Notes

### Tech Stack Reference
- **Backend**: Python 3.11+, Flask 3.x, Flask-SQLAlchemy, Flask-Migrate, Flask-CORS
- **Frontend**: React 18, TypeScript 5.x, Vite 5.x
- **Database**: PostgreSQL 16 (setup in later story)

### Project Structure
```
DbToolsApp/
├── backend/
│   ├── app/
│   │   ├── __init__.py      # App factory
│   │   ├── config.py        # Configuration
│   │   └── api/             # API blueprints (later)
│   ├── requirements.txt
│   ├── requirements-dev.txt
│   └── run.py
├── frontend/
│   ├── src/
│   ├── package.json
│   ├── vite.config.ts
│   └── tsconfig.json
├── docs/
├── scripts/
│   └── setup.ps1
├── .env.example
└── README.md
```

### Environment Variables (.env.example)
```
FLASK_APP=run.py
FLASK_ENV=development
SECRET_KEY=dev-secret-key-change-in-production
DATABASE_URL=postgresql://postgres:1234@localhost:5432/dbtools_system
```

### Flask App Factory Pattern
```python
# backend/app/__init__.py
from flask import Flask
from flask_cors import CORS

def create_app(config_class=None):
    app = Flask(__name__)
    if config_class:
        app.config.from_object(config_class)
    CORS(app)

    @app.route('/api/health')
    def health():
        return {'status': 'healthy'}

    return app
```

## Testing

### Test Requirements
- Backend tests: `pytest` in `backend/tests/`
- Frontend tests: `vitest` in `frontend/tests/`
- Test the health endpoint returns 200 OK

### Test Commands
```bash
# Backend
cd backend && pytest

# Frontend
cd frontend && npm test
```

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-17 | 0.1 | Initial story creation | PM (John) |

---

## Dev Agent Record

### Agent Model Used
(To be filled by dev agent)

### Debug Log References
(To be filled by dev agent)

### Completion Notes List
(To be filled by dev agent)

### File List
(To be filled by dev agent)

---

## QA Results
(To be filled by QA agent)
