# Story 1.1: Project Setup & Repository Structure

## Status: Ready for Review

## Story

**As a** developer,
**I want** a properly structured monorepo with Flask backend and React frontend,
**so that** I have a solid foundation to build features upon.

## Acceptance Criteria

| # | Criteria |
|---|----------|
| 1 | Repository follows monorepo structure: `/backend`, `/frontend`, `/docs`, `/scripts` |
| 2 | Backend: Flask 3.x project with virtual environment and requirements.txt |
| 3 | Backend: Flask configuration supports dev/prod environments via environment variables |
| 4 | Frontend: React 18 + TypeScript + Vite project initialized |
| 5 | Frontend: ESLint + Prettier configured for consistent code style |
| 6 | `/api/health` endpoint returns `{"status": "healthy"}` with 200 OK |
| 7 | Setup script (`scripts/setup.ps1`) to initialize local environment |
| 8 | README.md with manual setup instructions |
| 9 | `.env.example` file documenting required environment variables |

## Tasks / Subtasks

- [x] Task 1: Create directory structure (AC: 1)
  - [x] Create `/backend` folder
  - [x] Create `/frontend` folder
  - [x] Create `/scripts` folder
  - [x] Verify `/docs` exists

- [x] Task 2: Initialize Flask backend (AC: 2, 3)
  - [x] Create `backend/requirements.txt` with Flask 3.x and dependencies
  - [x] Create `backend/requirements-dev.txt` with dev dependencies
  - [x] Create `backend/app/__init__.py` with app factory pattern
  - [x] Create `backend/app/config.py` with Config class (dev/prod)
  - [x] Create `backend/run.py` entry point

- [x] Task 3: Create health endpoint (AC: 6)
  - [x] Add `/api/health` route returning `{"status": "healthy"}`
  - [x] Test endpoint returns 200 OK

- [x] Task 4: Initialize React frontend (AC: 4, 5)
  - [x] Initialize Vite + React + TypeScript project in `/frontend`
  - [x] Configure ESLint with recommended rules
  - [x] Configure Prettier for code formatting
  - [x] Add npm scripts for dev, build, lint, format

- [x] Task 5: Create setup script (AC: 7)
  - [x] Create `scripts/setup.ps1` for Windows
  - [x] Script creates Python virtual environment
  - [x] Script installs Python dependencies
  - [x] Script installs npm dependencies

- [x] Task 6: Create documentation (AC: 8, 9)
  - [x] Create `README.md` with setup instructions
  - [x] Create `.env.example` with all required variables

## Dev Notes

### Tech Stack Reference
- **Backend**: Python 3.11+, Flask 3.x, Flask-SQLAlchemy, Flask-Migrate, Flask-CORS
- **Frontend**: React 18, TypeScript 5.x, Vite 5.x
- **Database**: PostgreSQL 16 (setup in later story)

### Project Structure
```
DbToolsApp/
├── backend/
│   ├── app/
│   │   ├── __init__.py      # App factory
│   │   ├── config.py        # Configuration
│   │   └── api/             # API blueprints (later)
│   ├── requirements.txt
│   ├── requirements-dev.txt
│   └── run.py
├── frontend/
│   ├── src/
│   ├── package.json
│   ├── vite.config.ts
│   └── tsconfig.json
├── docs/
├── scripts/
│   └── setup.ps1
├── .env.example
└── README.md
```

### Environment Variables (.env.example)
```
FLASK_APP=run.py
FLASK_ENV=development
SECRET_KEY=dev-secret-key-change-in-production
DATABASE_URL=postgresql://postgres:1234@localhost:5432/dbtools_system
```

### Flask App Factory Pattern
```python
# backend/app/__init__.py
from flask import Flask
from flask_cors import CORS

def create_app(config_class=None):
    app = Flask(__name__)
    if config_class:
        app.config.from_object(config_class)
    CORS(app)

    @app.route('/api/health')
    def health():
        return {'status': 'healthy'}

    return app
```

## Testing

### Test Requirements
- Backend tests: `pytest` in `backend/tests/`
- Frontend tests: `vitest` in `frontend/tests/`
- Test the health endpoint returns 200 OK

### Test Commands
```bash
# Backend
cd backend && pytest

# Frontend
cd frontend && npm test
```

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-17 | 0.1 | Initial story creation | PM (John) |

---

## Dev Agent Record

### Agent Model Used
Claude Opus 4.5 (claude-opus-4-5-20251101)

### Debug Log References
- Backend tests: 2 passed (test_health_endpoint_returns_200, test_health_endpoint_returns_healthy_status)
- Frontend lint: passed (no errors)
- Frontend build: successful (508ms)

### Completion Notes List
- Created monorepo structure with backend/, frontend/, scripts/ directories
- Initialized Flask 3.x backend with app factory pattern
- Created health endpoint at /api/health returning {"status": "healthy"}
- Initialized React 18 + TypeScript + Vite frontend
- Configured ESLint with Prettier integration
- Created setup.ps1 PowerShell script for Windows
- Created README.md and .env.example documentation

### File List
- backend/app/__init__.py (created)
- backend/app/config.py (created)
- backend/run.py (created)
- backend/requirements.txt (created)
- backend/requirements-dev.txt (created)
- backend/pytest.ini (created)
- backend/tests/__init__.py (created)
- backend/tests/conftest.py (created)
- backend/tests/test_health.py (created)
- frontend/eslint.config.js (modified)
- frontend/package.json (modified)
- frontend/.prettierrc (created)
- scripts/setup.ps1 (created)
- README.md (created)
- .env.example (created)

---

## QA Results
(To be filled by QA agent)
