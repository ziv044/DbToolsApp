# Story 4.8: Job Scheduler UI - Job List

## Status: Ready for Review

## Story

**As a** user,
**I want** a visual interface to view all scheduled jobs,
**so that** I can monitor and manage automation at a glance.

## Acceptance Criteria

| # | Criteria |
|---|----------|
| 1 | Jobs page at `/jobs` route |
| 2 | Job list table: Name, Type, Schedule, Next Run, Last Run, Status, Actions |
| 3 | Status column shows: Enabled (green), Disabled (gray), Running (blue spinner) |
| 4 | "Create Job" button opens job creation wizard |
| 5 | Quick actions: Run Now, Enable/Disable, Edit, Delete |
| 6 | Filter by job type and status |
| 7 | Sort by next run time (default), name, or last run |
| 8 | Row click navigates to job detail |
| 9 | Visual indicator for jobs that failed last execution |
| 10 | Auto-refresh every 30 seconds |

## Tasks / Subtasks

- [x] Task 1: Create Jobs page (AC: 1)
- [x] Task 2: Create job list table (AC: 2, 3, 7, 8, 9)
- [x] Task 3: Add quick actions (AC: 5)
- [x] Task 4: Add filters (AC: 6)
- [x] Task 5: Add create button (AC: 4)
- [x] Task 6: Add auto-refresh (AC: 10)

## Dev Notes

### Job List Component
```typescript
const statusColors = {
  enabled: 'text-green-500',
  disabled: 'text-gray-400',
  running: 'text-blue-500 animate-pulse',
};

const JobRow = ({ job }) => (
  <tr onClick={() => navigate(`/jobs/${job.id}`)}>
    <td>{job.name}</td>
    <td><Badge>{job.type}</Badge></td>
    <td>{formatSchedule(job.schedule_config)}</td>
    <td>{formatDate(job.next_run_at)}</td>
    <td><StatusBadge status={job.last_status} /></td>
    <td><JobActions job={job} /></td>
  </tr>
);
```

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-17 | 0.1 | Initial story creation | PM (John) |

---

## Dev Agent Record

### Agent Model Used
Claude Opus 4.5 (claude-opus-4-5-20251101)

### Debug Log References
- No issues encountered during development

### Completion Notes List
- Created `frontend/src/services/jobService.ts`:
  - Types: JobType, ScheduleType, ExecutionStatus, Job, JobExecution
  - API methods: getAll, get, create, update, delete, runNow, enable, disable, getExecutions, getExecution
  - Helper constants: JOB_TYPE_LABELS, JOB_TYPE_ICONS, SCHEDULE_TYPE_LABELS
  - `formatSchedule()` function for human-readable schedule display
- Updated `frontend/src/pages/Jobs.tsx`:
  - Full job list table with columns: Name, Type, Schedule, Next Run, Last Run, Status, Actions
  - JobRow component with click navigation to detail page
  - StatusBadge component showing enabled/disabled/running/success/failed states
  - Quick actions: Run Now (PlayCircle), Enable/Disable (Play/Pause), Delete (Trash2)
  - Type filter dropdown and enabled/disabled filter
  - Visual indicator (AlertCircle) for jobs that failed last execution
  - Auto-refresh every 30 seconds with visibility API (pauses when tab hidden)
- Created `frontend/src/components/jobs/CreateJobModal.tsx`:
  - 4-step wizard: Type selection → Schedule config → Job config → Review
  - Job type selection with icons and descriptions
  - Schedule types: interval (presets), cron (expression), once (datetime picker)
  - Type-specific config: policy selection for policy_execution, script editor for custom_script
  - Save as disabled or save & enable options
- Created `frontend/src/components/jobs/index.ts` with exports
- Frontend builds successfully

### File List
- frontend/src/services/jobService.ts (new)
- frontend/src/pages/Jobs.tsx (modified)
- frontend/src/components/jobs/CreateJobModal.tsx (new)
- frontend/src/components/jobs/index.ts (new)

---

## QA Results
