# Story 4.9: Job Scheduler UI - Job Detail & Execution History

## Status: Ready for Review

## Story

**As a** user,
**I want** to see detailed job information and execution history,
**so that** I can troubleshoot and verify job runs.

## Acceptance Criteria

| # | Criteria |
|---|----------|
| 1 | Job detail page at `/jobs/{id}` route |
| 2 | Header: Job name, type badge, status, "Run Now" button |
| 3 | Configuration section: Shows schedule and job-specific config |
| 4 | Execution history table: Start Time, Duration, Status, Server (if applicable) |
| 5 | Click execution row to see details: full result JSON, error message |
| 6 | Execution status: success (green), failed (red), running (blue), skipped (gray) |
| 7 | "Edit Job" button opens edit form |
| 8 | "Delete Job" with confirmation dialog |
| 9 | Timeline/calendar view option showing past and scheduled runs |
| 10 | Pagination for execution history (20 per page) |

## Tasks / Subtasks

- [x] Task 1: Create JobDetail page (AC: 1)
- [x] Task 2: Create header section (AC: 2)
- [x] Task 3: Create config section (AC: 3)
- [x] Task 4: Create execution history (AC: 4, 5, 6, 10)
- [x] Task 5: Add edit/delete actions (AC: 7, 8)
- [ ] Task 6: Optional: Add timeline view (AC: 9) - Deferred to future iteration

## Dev Notes

### Execution Detail Modal
```typescript
const ExecutionDetail = ({ execution }) => (
  <Dialog>
    <DialogContent>
      <h3>Execution {execution.id}</h3>
      <dl>
        <dt>Started</dt><dd>{formatDate(execution.started_at)}</dd>
        <dt>Duration</dt><dd>{formatDuration(execution.duration)}</dd>
        <dt>Status</dt><dd><StatusBadge status={execution.status} /></dd>
      </dl>
      {execution.error_message && (
        <Alert variant="destructive">{execution.error_message}</Alert>
      )}
      <pre>{JSON.stringify(execution.result, null, 2)}</pre>
    </DialogContent>
  </Dialog>
);
```

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-17 | 0.1 | Initial story creation | PM (John) |

---

## Dev Agent Record

### Agent Model Used
Claude Opus 4.5 (claude-opus-4-5-20251101)

### Debug Log References
- No issues encountered during development

### Completion Notes List
- Created `frontend/src/pages/JobDetail.tsx`:
  - Header with job name, type icon, status badge, action buttons (Run Now, Enable/Disable, Edit, Delete)
  - Schedule summary card showing schedule type, next run, last run
  - Tabs: Configuration and Execution History
  - ConfigurationTab: Two-column layout for schedule config and job config
  - ExecutionsTab: Table with Started, Duration, Status, Server columns
  - Click execution row to expand and show details panel
  - ExecutionDetailPanel: Shows status, timestamps, duration, error message (if any), result JSON
  - Pagination for execution history (20 per page)
  - ExecutionStatusBadge: success (green), failed (red), pending (yellow), running (blue), cancelled (gray)
  - JobStatusBadge: Running (blue spinner), Disabled (gray), Last Failed (red), Enabled (green)
  - Helper functions: formatLabel, formatValue, formatDuration
- Updated `frontend/src/pages/index.ts` to export JobDetail
- Updated `frontend/src/App.tsx`:
  - Added JobDetail to imports
  - Added route `/jobs/:id` for JobDetail page
- Frontend builds successfully
- Note: Timeline/calendar view (AC: 9, Task 6) deferred as optional feature

### File List
- frontend/src/pages/JobDetail.tsx (new)
- frontend/src/pages/index.ts (modified)
- frontend/src/App.tsx (modified)

---

## QA Results
